## Introduction to Web Pages

- A **web page** consists of **Objects**
- An **Object** can be:
    - HTML file
    - JPEG image
    - Audio file
    - etc.
- A web page consists of a **base HTML-file** which includes several **referenced objects**
- Each object is addressable by a **Unified Resource Locator (URL)**
- **Host name** is translated to server **IP address** using the **Domain Name System (DNS)**

**Example URL:**

```
www.someschool.edu/someDept/pic.gif
└─────┬──────┘└───┬────┘
     host name                 path name
```

---

## The HTTP Protocol

**Hypertext Transfer Protocol (HTTP)** <img src="../../images/Pasted image 20251228232907.png" align="right" width="280" style="margin: 20px 0 20px 20px;">

- HTTP is an **application layer** protocol
- Runs at **port 80** at the transport layer
- HTTP messages in **client/server model** are either:
    - **Request**
        - **Client Request**  
            Browser that requests, receives responses from web servers (using HTTP protocol) and "displays" Web objects
    - **Response**
        - **Server Response**  
            Web server sends (using HTTP protocol) objects in response to clients' requests

---

### Using HTTP with TCP<img src="../../images/Pasted image 20251228233740.png" align="right" width="220" style="margin: 0 0 20px 20px;">

- **TCP 3-Way Handshake**: TCP connection establishes in 3 steps:
    1. Client initiates TCP connection (creates socket) to server at port 80
    2. Server accepts TCP connection from client
    3. HTTP messages exchanged between browser (HTTP client) and Web server (HTTP server)
- HTTP is **stateless** → Server has **no information** about past client requests

---

### Round Trip Time (RTT)<img src="../../images/Pasted image 20251228234055.png" align="right" width="260" style="margin: 0 0 20px 20px;">

- **Round Trip Time (RTT)**: Time for a small packet to travel from client to server and back → _**RTT = 2 × propagation time**
	
- **Total transmission time** = initial request transmission time + web page objects transmission time
	
- **Initial request transmission time** = **2 RTT** (one for TCP connection request + one for the HTML base file)

---

## HTTP Connections

### Types of HTTP Connections

- **Non-persistent HTTP**  
    → New TCP connection for **each object**
- **Persistent HTTP**  
    → Single TCP connection for **all objects**

---

### Non-persistent HTTP

- One TCP connection per object
- Each object requires:
    - **1 RTT** for _TCP_ connection setup
    - **1 RTT** for _HTTP_ request/response

#### Non-persistent HTTP Response Time

1. **Non-Persistent – Without parallel connections**
    - Each object takes **2 RTTs** (1 for TCP connection + 1 for HTTP request/response)
    - Sequential pattern (objects are requested one after another)
2. **Non-Persistent – With parallel connections**
    - Sending multiple objects in **separate and parallel connections**
    - Multiple TCP connections open simultaneously to fetch objects faster

---

<div align="center"> <img src="../../images/Pasted image 20251229000402.png" width="45%"> <img src="../../images/Pasted image 20251229000543.png" width="45%"> </div>

---

#### Advantages and Disadvantages of Non-Persistent Connections

**Advantages**

- No wasting of network resources because the connection opens only when there is some data to be sent.
- More secure because after sending the data, the connection gets terminated and nothing can be shared thereafter.

**Disadvantages**

- Requires greater CPU overhead for the transmission of data

---

### Persistent HTTP

- Single TCP connection for multiple objects
- Two main variants:
    - **Non-pipelined**: objects sent sequentially (1 RTT each after initial connection)
    - **Pipelined**: objects sent back-to-back (faster – only 1 RTT after initial connection for all)

---

#### Persistent HTTP Response Time<img src="../../images/Pasted image 20251228235146.png" align="right" width="480" style="margin: 10px 0 20px 20px;">

1. **Non-Pipelined Persistent Connection**
    - Establish one TCP connection → takes **2 RTTs** (handshake + initial request)
    - Send all the objects sequentially → **1 RTT for each object**
    - **No separate TCP connection** required for each object (saves handshakes)
2. **Pipelined Persistent Connection**
    - All objects sent **back-to-back** over the same connection
    - After the initial **2 RTTs** (for connection + base request), all remaining objects are transferred in **only 1 RTT** total (most efficient)

> Most modern browsers like **Chrome** and **Firefox** use **persistent connections** by default (usually with pipelining where supported).

---

#### Advantages and Disadvantages of Persistent Connections

**Advantages**

- Lower CPU and memory usage because there is less number of connections
- Reduced network congestion (fewer TCP connections)
- Reduced latency in subsequent requests (no handshaking)

**Disadvantages**

- Network resources may be kept occupied even when not needed and may not be available to others

---

### Comparison between HTTP Connections

|Feature|Non-persistent HTTP|Persistent HTTP|
|---|---|---|
|**Objects per TCP connection**|At most **one object** sent over TCP connection, then close connection|**Multiple objects** can be sent over single TCP connection between client and server|
|**Downloading multiple objects**|Requires **multiple connections**|Can use **single connection** (for all or none)|
|**Suitability**|Suitable for pages with **multiple objects**|Either displaying **all page's objects** or not|
|**Typical Behavior**|New TCP connection for each object|Single TCP connection remains open for multiple objects|
|**Overhead**|High (many TCP handshakes)|Low (one handshake for many objects)|

---

> **Two types of HTTP messages**: request or response

## HTTP Request Message

### HTTP request message:

- ASCII (human-readable format)

**Example of HTTP Request Message:**

```
GET /index.html HTTP/1.1\r\n
Host: www-net.cs.umass.edu\r\n
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:91.0) Gecko/20100101 Firefox/91.0\r\n
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8\r\n
Accept-Language: en-US,en;q=0.5\r\n
Accept-Encoding: gzip, deflate\r\n
Connection: keep-alive\r\n
Keep-Alive: 115\r\n
\r\n
```

**Key Parts Explained**:<img src="../../images/Pasted image 20251229005351.png" align="right" width="480" style="margin: -20px 0px 20px 20px;">

- **Request line**: `GET /index.html HTTP/1.1`
- **Header lines**: Host, User-Agent, Accept, Accept-Language, Accept-Encoding, Connection, Keep-Alive, etc.
- **Carriage return + line feed (`\r\n`)**: Marks the end of each line
- Blank line (`\r\n`) after headers indicates the **end of header lines**

---

### General Format of HTTP Request Message

```
method sp URL sp version cr lf
header field name : value cr lf
header field name : value cr lf
...
header field name : value cr lf
cr lf
entity body
```

- <img src="../../images/Pasted image 20251229005851.png" align="right" width="300" style="margin: -50px 0px 20px 20px;">**Request line**: method + URL + version
- **Header lines**: field name : value
- **Blank line** (cr lf): separates headers from body
- **Entity body** (optional): used in POST, PUT, etc.

---

### HTTP Request Message Methods

**GET**:

- Open the web page **POST**:
- Web page often includes form input
- Input is uploaded to server in **entity body** **HEAD**:
- Asks server to leave requested object out of response **DELETE**:
- Deletes file specified in the URL field

#### **HTTP Versions and Supported Methods**

- **HTTP/1.0**:
    - GET
    - POST
    - HEAD
- **HTTP/1.1**:
    - GET, POST, HEAD
    - DELETE

---

### Quick Reference Table – HTTP Request Methods Summary

|Method|Purpose|Entity Body?|HTTP Version|
|---|---|---|---|
|**GET**|Retrieve/open the web page|No|1.0 & 1.1|
|**POST**|Submit form data/input to server|Yes|1.0 & 1.1|
|**HEAD**|Get headers only (no object in response)|No|1.0 & 1.1|
|**DELETE**|Delete resource specified in URL|No|1.1 only|

---

## HTTP Response Message

**Structure**:<img src="../../images/Pasted image 20251229010349.png" align="right" width="480" style="margin: 10px 0px 20px 20px;">

- Status line: `HTTP/1.1 200 OK`
- Header lines: `Date:`, `Server:`, `Content-Length:`, etc.
- Blank line
- Entity body (requested object)

**Common Status/Response Codes**:

- _(200)_ OK
- _(301)_ Moved Permanently
- _(400)_ Bad Request
- _(404)_ Not Found
- _(505)_ HTTP Version Not Supported

---

## User-Server State: Cookies

- HTTP is **stateless** → Cookies solve this problem
- Small piece of data sent by server to browser
- Browser stores it and sends it back in future requests

**Typical Cookie Usage Steps**:<img src="../../images/Pasted image 20251229010937.png" align="right" width="500" style="margin: 10px 0px 20px 20px;">

1. Client requests page for the first time
2. Server creates unique ID and sends cookie
3. Cookie is stored on client (browser)
4. Client includes cookie in future requests
5. Server uses cookie to identify returning user

**Example**:

- You always access Internet from your PC
- By visiting specific e-commerce site for first time
- when initial HTTP requests arrives at site, site creates:
    - unique ID
    - entry in backend database for ID
- Cookie is sent in the response message and will be sent with further requests.

---

## Web Caching: Proxy Server

- **Proxy server** = gateway between users and the Internet.
- **Proxy server** (web cache) acts as both client and server
    - server for original requesting client
    - client to origin server
- **Goal**: Satisfy client requests **without involving origin server** <img src="../../images/Pasted image 20251229011754.png" align="right" width="450" style="margin: 0px 0px 20px 20px;">

**How it works**:

- User configures browser to access web via cache
- Browser sends **all HTTP requests** to cache
    - If **object in cache** → cache returns it immediately
    - Else → cache requests object from origin server, stores it, then returns to client

**Benefits**:

- Reduce **response time** for client request
- Reduce **traffic** on institution's access link
- Prevent cyber attackers from entering a private network

> Installed by ISP (university, company, residential)

---